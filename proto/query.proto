syntax = "proto3";

package otelcli.query.v1;

import "opentelemetry/proto/trace/v1/trace.proto";
import "opentelemetry/proto/logs/v1/logs.proto";
import "opentelemetry/proto/metrics/v1/metrics.proto";
import "opentelemetry/proto/resource/v1/resource.proto";

service QueryService {
  rpc QueryTraces(QueryTracesRequest) returns (QueryTracesResponse);
  rpc QueryLogs(QueryLogsRequest) returns (QueryLogsResponse);
  rpc QueryMetrics(QueryMetricsRequest) returns (QueryMetricsResponse);
}

message QueryTracesRequest {
  string service_name = 1;
  string trace_id = 2;
  map<string, string> attributes = 3;
  int32 limit = 4;
}

message QueryTracesResponse {
  repeated opentelemetry.proto.trace.v1.ResourceSpans resource_spans = 1;
}

message QueryLogsRequest {
  string service_name = 1;
  string severity = 2;
  map<string, string> attributes = 3;
  int32 limit = 4;
}

message QueryLogsResponse {
  repeated opentelemetry.proto.logs.v1.ResourceLogs resource_logs = 1;
}

message QueryMetricsRequest {
  string service_name = 1;
  string metric_name = 2;
  int32 limit = 3;
}

message QueryMetricsResponse {
  repeated opentelemetry.proto.metrics.v1.ResourceMetrics resource_metrics = 1;
}
